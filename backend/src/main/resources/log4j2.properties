# Log4j2 Configuration for TextRover Backend

# Root logger configuration
rootLogger.level = INFO
rootLogger.appenderRefs = stdout, file
rootLogger.appenderRef.stdout.ref = ConsoleAppender
rootLogger.appenderRef.file.ref = FileAppender

# Console Appender
appender.console.type = Console
appender.console.name = ConsoleAppender
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{36}]%notEmpty{ [%X{requestId}]}%notEmpty{ [%X{method}%X{url}]}%notEmpty{ [%X{clientIp}]} - %msg%n

# File Appender with Rolling
appender.file.type = RollingFile
appender.file.name = FileAppender
appender.file.fileName = logs/text-rover.log
appender.file.filePattern = logs/text-rover-%i.log.gz
appender.file.layout.type = PatternLayout
appender.file.layout.pattern = %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%logger{50}]%notEmpty{ [%X{requestId}]}%notEmpty{ [%X{method}%X{url}]}%notEmpty{ [%X{clientIp}]} - %msg%n
appender.file.policies.type = Policies
appender.file.policies.size.type = SizeBasedTriggeringPolicy
appender.file.policies.size.size = 10MB
appender.file.strategy.type = DefaultRolloverStrategy
appender.file.strategy.max = 30
appender.file.strategy.fileIndex = min

# Logger configurations
logger.textrover.name = com.textrover
logger.textrover.level = DEBUG
logger.textrover.additivity = false
logger.textrover.appenderRefs = stdout, file
logger.textrover.appenderRef.stdout.ref = ConsoleAppender
logger.textrover.appenderRef.file.ref = FileAppender

# Spring Framework loggers
logger.springframework.name = org.springframework
logger.springframework.level = INFO
logger.springframework.additivity = false
logger.springframework.appenderRefs = stdout, file
logger.springframework.appenderRef.stdout.ref = ConsoleAppender
logger.springframework.appenderRef.file.ref = FileAppender

# Spring Web loggers for request/response details
logger.springweb.name = org.springframework.web
logger.springweb.level = DEBUG
logger.springweb.additivity = false
logger.springweb.appenderRefs = stdout, file
logger.springweb.appenderRef.stdout.ref = ConsoleAppender
logger.springweb.appenderRef.file.ref = FileAppender

# Request logging filter
logger.requestfilter.name = org.springframework.web.filter.CommonsRequestLoggingFilter
logger.requestfilter.level = DEBUG
logger.requestfilter.additivity = false
logger.requestfilter.appenderRefs = stdout, file
logger.requestfilter.appenderRef.stdout.ref = ConsoleAppender
logger.requestfilter.appenderRef.file.ref = FileAppender

# Hibernate/JPA
logger.hibernate.name = org.hibernate
logger.hibernate.level = ERROR
logger.hibernate.additivity = false
logger.hibernate.appenderRefs = stdout, file
logger.hibernate.appenderRef.stdout.ref = ConsoleAppender
logger.hibernate.appenderRef.file.ref = FileAppender

# Security logging (if used in future)
logger.security.name = org.springframework.security
logger.security.level = DEBUG
logger.security.additivity = false
logger.security.appenderRefs = stdout, file
logger.security.appenderRef.stdout.ref = ConsoleAppender
logger.security.appenderRef.file.ref = FileAppender
